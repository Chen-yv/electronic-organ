## 基于stm32f103c8t6的电子琴

#### 一、物料清单：

```C
4x4矩阵键盘、stm32f103c8t6核心板、0.96寸IIC通信OLED屏幕、无源蜂鸣器、W25Q32，RGB3色灯
```



#### 二、功能列表

1、内置功能：系统内置最多16首歌曲，每首歌最大4kB（包括歌名）

2、高自由度：用户可自行录入歌曲，录制结束后可以自行判定是否保存，保存后掉电保留

4、人性化设计：用户可根据ui中的提示选择修改音量、校准音色，录制、播放歌曲等

5、动感音乐：根据音乐节奏变换灯光氛围

6、音乐高保真：保存歌曲节奏，可修改音色录制、播放

7、使用延时压缩技术：单首歌曲可占用更小内存空间

8、出厂默认设置：用户可自行恢复出厂设置

9、新手友好：内置诸多提示，新手即可上手操作

#### 三、技术概览

1、使用一路pwm控制无源蜂鸣器，通过动态调节比较寄存器值和重装寄存器值改变音色和音量

2、使用定时中断，定时5秒切换滚动小贴士内容

3、使用大量结构体、指针与位运算，提高运行效率，优化代码繁杂度

4、屏幕定时刷新，保证内容实时显示，同时实现无感刷新

5、延迟读取，初始化时仅读取地址，播放歌曲时再从flash读取内容，减少内存开销

#### 四、优化及改进

1、加入多个八度，完善音乐保真度

2、完善封装基础硬件控制，实现模块化编程，实现各功能、各部分解耦

3、完善ui设计，使用更加人性化的ui，完善人机交互功能，实现高自由度

4、可以考虑作为家居类嵌入式设备，使用蓝牙、wifi等技术短距离控制，融入多种物联网设备集群

5、完善内存管理机制，合理分配空间

6、引入操作系统，实现多任务并发执行

7、引入网络通信技术，实现与云端数据同步等